{"mappings":"iiBAyGA,IAAAA,EAAAC,EAAA,SAEMC,EAAeC,SAASC,cAAc,kBACtCC,EAAYF,SAASC,cAAc,SACnCE,EAAcH,SAASI,iBAAiB,SAC1CC,EAAc,GACdC,EAAU,CAAEC,WAAY,EAAGC,UAAW,GAM1C,SAASC,EAAiBC,GACxBX,EAAaY,SAAWD,C,CA0D1BX,EAAaa,iBAAiB,SAvD9B,SAAwBC,GACtBA,EAAMC,iBARNX,EAAYY,SAAQ,SAAAC,G,OAASX,EAAYW,EAAKC,aAAa,SAAWD,EAAKN,K,IAiD3EQ,aAAaZ,EAAQC,YACrBW,aAAaZ,EAAQE,WAlCrBF,EAAQE,UAAYW,YAAW,WAM/Bb,EAAQC,WAAaa,aAAY,WAM1B,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAgBC,KAAKC,SAAW,GACtCP,YAAW,WACLK,EACFF,IAEAC,G,GAEDlB,EAAYsB,K,IAEdC,MAAK,WACJC,QAAQC,IAAI,uBACZC,EAAAlC,GAASmC,OAAOC,QAAQ,wBAAyCC,OAAjB7B,EAAYsB,KAAK,M,IAElEQ,OAAM,WACLN,QAAQC,IAAI,sBACZC,EAAAlC,GAASmC,OAAOI,QAAQ,uBAAwCF,OAAjB7B,EAAYsB,KAAK,M,MApBjEtB,EAAYsB,K,GANZtB,EAAYgC,OANf5B,GAAiB,E,IAmDnBP,EAAUU,iBAAiB,SAV3B,W,IACO0B,GAAa,EAAbC,GAAa,EAAbC,OAAaC,E,IAAlB,QAAKC,EAAAC,EAAiBxC,EAAWyC,OAAAC,cAA5BP,GAAAI,EAAAC,EAAaG,QAAAC,MAAbT,GAAa,EAAiB,CAA9B,IAAMU,EAANN,EAAahC,MAChB,GAAIsC,EAAQtC,MAAQ,GAAuB,KAAlBsC,EAAQtC,MAC/B,OAAOD,GAAiB,E,WAFvB8B,GAAa,EAAbC,EAAaS,C,aAAbX,GAAa,MAAbK,EAAaO,QAAbP,EAAaO,Q,YAAbX,E,MAAAC,C,EAKL/B,GAAiB,E,IAMnBA,GAAiB,E","sources":["src/js/03-promises.js"],"sourcesContent":["\n// import { reject } from 'lodash';\n// import Notiflix from 'notiflix';\n\n// const resultButton = document.querySelector(`.form > button`);\n// const delayForm = document.querySelector(`.form`);\n// let delayFields = document.querySelectorAll(`input`);\n// let delayObject = {};\n// let amountRepeat = 0;\n// let timerId = { intervalId: 0, timeoutId: 0 };\n\n// let getDelayObject = () => {\n//   delayFields.forEach(\n//     elem => (delayObject[elem.getAttribute(`name`)] = elem.value)\n//   );\n// };\n\n// let resultBtnIsBlock = value => (resultButton.disabled = value);\n\n// function mainController() {\n//   event.preventDefault();\n//   getDelayObject();\n//   amountRepeat = 0;\n//   cleaningTimer();\n//   startTimeout();\n//   resultBtnIsBlock(true); // Disable the button when promises start\n// }\n\n// let startTimeout = () => {\n//   timerId.timeoutId = setTimeout(() => {\n//     createPromise();\n//     startInterval();\n//   }, delayObject.delay);\n// };\n\n// let startInterval = () => {\n//   timerId.intervalId = setInterval(() => {\n//     createPromise();\n//   }, delayObject.step);\n// };\n\n// let createPromise = (position, delay) => {\n//   return new Promise ((resolve, reject)) => {\n//     const shouldResolve = Math.random()> 0.3;\n//     setTimeout(() => { \n//       if (shouldResolve){\n//         resolve({position, delay})\n//       } else {\n//         reject ({position, delay})\n//       }\n//     }, delay) \n//   }\n// }\n\n\n//   if (amountRepeat <= delayObject.amount) {\n   \n//     if (shouldResolve) {\n//       console.log(`ok`);\n//       Notiflix.Notify.success(\n//         `Fulfilled promise ${amountRepeat} in ${delayObject.step}ms`\n//       );\n//     } else {\n//       console.log(`not ok`);\n//       Notiflix.Notify.failure(\n//         `Rejected promise ${amountRepeat} in ${delayObject.step}ms`\n//       );\n//     }\n//   } else {\n//     cleaningTimer();\n//     resultBtnIsBlock(false); // Re-enable the button when promises are completed\n//   }\n// ;\n\n\n// let cleaningTimer = () => {\n//   clearTimeout(timerId.intervalId);\n//   clearInterval(timerId.timeoutId);\n// };\n\n// function changeController() {\n//   for (const element of delayFields) {\n//     if (element.value < 0 || element.value == ``) {\n//       return resultBtnIsBlock(true);\n//     }\n//   }\n//   resultBtnIsBlock(false); // Re-enable the button when valid values are entered\n// }\n\n// resultButton.addEventListener(`click`, mainController);\n// delayForm.addEventListener(`input`, changeController); // Use 'input' event for immediate validation\n\n// resultBtnIsBlock(true);\n\n// for (let pos=1; pos <= counter; pos+=1){\n//   let del = Number((inputDelay.value) + Number(pos-1) * inputStep.value)\n//   const promise = createPromise(pos, delay)\n//   promise .then(({ position, delay }) => {\n//     console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n//   })\n//   .catch(({ position, delay }) => {\n//     console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n//   }); \n// }\n\nimport Notiflix from 'notiflix';\n\nconst resultButton = document.querySelector('.form > button');\nconst delayForm = document.querySelector('.form');\nconst delayFields = document.querySelectorAll('input');\nlet delayObject = {};\nlet timerId = { intervalId: 0, timeoutId: 0 };\n\nfunction getDelayObject() {\n  delayFields.forEach(elem => (delayObject[elem.getAttribute('name')] = elem.value));\n}\n\nfunction resultBtnIsBlock(value) {\n  resultButton.disabled = value;\n}\n\nfunction mainController(event) {\n  event.preventDefault();\n  getDelayObject();\n  cleaningTimer();\n  startTimeout();\n  resultBtnIsBlock(true);\n}\n\nfunction startTimeout() {\n  timerId.timeoutId = setTimeout(() => {\n    startInterval();\n  }, delayObject.delay);\n}\n\nfunction startInterval() {\n  timerId.intervalId = setInterval(() => {\n    createPromise();\n  }, delayObject.step);\n}\n\nfunction createPromise() {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve();\n      } else {\n        reject();\n      }\n    }, delayObject.step);\n  })\n    .then(() => {\n      console.log('✅ Fulfilled promise');\n      Notiflix.Notify.success(`Fulfilled promise in ${delayObject.step}ms`);\n    })\n    .catch(() => {\n      console.log('❌ Rejected promise');\n      Notiflix.Notify.failure(`Rejected promise in ${delayObject.step}ms`);\n    });\n}\n\nfunction cleaningTimer() {\n  clearTimeout(timerId.intervalId);\n  clearTimeout(timerId.timeoutId);\n}\n\nfunction changeController() {\n  for (const element of delayFields) {\n    if (element.value < 0 || element.value === '') {\n      return resultBtnIsBlock(true);\n    }\n  }\n  resultBtnIsBlock(false);\n}\n\nresultButton.addEventListener('click', mainController);\ndelayForm.addEventListener('input', changeController);\n\nresultBtnIsBlock(true);\n\n"],"names":["$6JpON","parcelRequire","$ce04d3a99e08e73b$var$resultButton","document","querySelector","$ce04d3a99e08e73b$var$delayForm","$ce04d3a99e08e73b$var$delayFields","querySelectorAll","$ce04d3a99e08e73b$var$delayObject","$ce04d3a99e08e73b$var$timerId","intervalId","timeoutId","$ce04d3a99e08e73b$var$resultBtnIsBlock","value","disabled","addEventListener","event","preventDefault","forEach","elem","getAttribute","clearTimeout","setTimeout","setInterval","Promise","resolve","reject","shouldResolve","Math","random","step","then","console","log","$parcel$interopDefault","Notify","success","concat","catch","failure","delay","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","element","err","return"],"version":3,"file":"03-promises.447d876f.js.map"}