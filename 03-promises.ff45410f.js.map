{"mappings":"iiBACA,IAAAA,EAAAC,EAAA,SAEMC,EAAeC,SAASC,cAAe,kBACvCC,EAAYF,SAASC,cAAe,SACtCE,EAAcH,SAASI,iBAAkB,SACzCC,EAAc,GACdC,EAAe,EACfC,EAAU,CAAEC,WAAY,EAAGC,UAAW,GAQtCC,EAAmB,SAAAC,G,OAAUZ,EAAaa,SAAWD,C,EAWzD,IAAIE,EAAe,WACjBN,EAAQE,UAAYK,YAAW,WAC7BC,IACAC,G,GACCX,EAAYY,M,EAGbD,EAAgB,WAClBT,EAAQC,WAAaU,aAAY,WAC/BH,G,GACCV,EAAYc,K,EAGbJ,EAAgB,aAClBT,GACoBD,EAAYe,OACRC,KAAKC,SAAW,IAEpCC,QAAQC,IAAK,MACbC,EAAA5B,GAAS6B,OAAOC,QACd,qBAAwCC,OAAnBtB,EAAa,QAAuBsB,OAAjBvB,EAAYc,KAAK,SAG3DI,QAAQC,IAAK,UACbC,EAAA5B,GAAS6B,OAAOG,QACd,oBAAuCD,OAAnBtB,EAAa,QAAuBsB,OAAjBvB,EAAYc,KAAK,SAI5DW,IACApB,GAAiB,G,EAIjBoB,EAAgB,WAClBC,aAAaxB,EAAQC,YACrBwB,cAAczB,EAAQE,U,EAYxBV,EAAakC,iBAAkB,SAzD/B,WACEC,MAAMC,iBARNhC,EAAYiC,SACV,SAAAC,G,OAAShC,EAAYgC,EAAKC,aAAc,SAAUD,EAAK1B,K,IASzDL,EAAe,EACfwB,IACAjB,IACAH,GAAiB,E,IAoDnBR,EAAU+B,iBAAkB,SAV5B,W,IACOM,GAAa,EAAbC,GAAa,EAAbC,OAAaC,E,IAAlB,QAAKC,EAAAC,EAAiBzC,EAAW0C,OAAAC,cAA5BP,GAAAI,EAAAC,EAAaG,QAAAC,MAAbT,GAAa,EAAiB,CAA9B,IAAMU,EAANN,EAAahC,MAChB,GAAIsC,EAAQtC,MAAQ,GAAuB,IAAlBsC,EAAQtC,MAC/B,OAAOD,GAAiB,E,WAFvB8B,GAAa,EAAbC,EAAaS,C,aAAbX,GAAa,MAAbK,EAAaO,QAAbP,EAAaO,Q,YAAbX,E,MAAAC,C,EAKL/B,GAAiB,E,IAMnBA,GAAiB,E","sources":["src/js/03-promises.js"],"sourcesContent":["\nimport Notiflix from 'notiflix';\n\nconst resultButton = document.querySelector(`.form > button`);\nconst delayForm = document.querySelector(`.form`);\nlet delayFields = document.querySelectorAll(`input`);\nlet delayObject = {};\nlet amountRepeat = 0;\nlet timerId = { intervalId: 0, timeoutId: 0 };\n\nlet getDelayObject = () => {\n  delayFields.forEach(\n    elem => (delayObject[elem.getAttribute(`name`)] = elem.value)\n  );\n};\n\nlet resultBtnIsBlock = value => (resultButton.disabled = value);\n\nfunction mainController() {\n  event.preventDefault();\n  getDelayObject();\n  amountRepeat = 0;\n  cleaningTimer();\n  startTimeout();\n  resultBtnIsBlock(true); // Disable the button when promises start\n}\n\nlet startTimeout = () => {\n  timerId.timeoutId = setTimeout(() => {\n    createPromise();\n    startInterval();\n  }, delayObject.delay);\n};\n\nlet startInterval = () => {\n  timerId.intervalId = setInterval(() => {\n    createPromise();\n  }, delayObject.step);\n};\n\nlet createPromise = () => {\n  amountRepeat++;\n  if (amountRepeat <= delayObject.amount) {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      console.log(`ok`);\n      Notiflix.Notify.success(\n        `Fulfilled promise ${amountRepeat} in ${delayObject.step}ms`\n      );\n    } else {\n      console.log(`not ok`);\n      Notiflix.Notify.failure(\n        `Rejected promise ${amountRepeat} in ${delayObject.step}ms`\n      );\n    }\n  } else {\n    cleaningTimer();\n    resultBtnIsBlock(false); // Re-enable the button when promises are completed\n  }\n};\n\nlet cleaningTimer = () => {\n  clearTimeout(timerId.intervalId);\n  clearInterval(timerId.timeoutId);\n};\n\nfunction changeController() {\n  for (const element of delayFields) {\n    if (element.value < 0 || element.value == ``) {\n      return resultBtnIsBlock(true);\n    }\n  }\n  resultBtnIsBlock(false); // Re-enable the button when valid values are entered\n}\n\nresultButton.addEventListener(`click`, mainController);\ndelayForm.addEventListener(`input`, changeController); // Use 'input' event for immediate validation\n\nresultBtnIsBlock(true);\n\n"],"names":["$6JpON","parcelRequire","$ce04d3a99e08e73b$var$resultButton","document","querySelector","$ce04d3a99e08e73b$var$delayForm","$ce04d3a99e08e73b$var$delayFields","querySelectorAll","$ce04d3a99e08e73b$var$delayObject","$ce04d3a99e08e73b$var$amountRepeat","$ce04d3a99e08e73b$var$timerId","intervalId","timeoutId","$ce04d3a99e08e73b$var$resultBtnIsBlock","value","disabled","$ce04d3a99e08e73b$var$startTimeout","setTimeout","$ce04d3a99e08e73b$var$createPromise","$ce04d3a99e08e73b$var$startInterval","delay","setInterval","step","amount","Math","random","console","log","$parcel$interopDefault","Notify","success","concat","failure","$ce04d3a99e08e73b$var$cleaningTimer","clearTimeout","clearInterval","addEventListener","event","preventDefault","forEach","elem","getAttribute","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","element","err","return"],"version":3,"file":"03-promises.ff45410f.js.map"}